<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Éditeur de niveau</title>
<link rel="stylesheet" href="general.css">
<script src="js/json.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<div class="container-fluid">
		<h1 class="text-center">Éditeur de niveau</h1>
	</div>

	<div class="container-fluid text-center" id="characters">
		<h2>Les personnages</h2>
	</div>
	<script>
		var request = new XMLHttpRequest();
		request.open('GET', 'characters');
		request.onload = function() {
			if(request.status === 200)
			{
				var characters = document.getElementById("characters");
				var charactersJson = JSON.parse(request.responseText);	
				
				var first = true;
				
				for (const character of charactersJson) 
				{
					if (first)
					{
						var addButtonRow = document.createElement('div');
						addButtonRow.className = "row";
						
						var addButton = document.createElement('a');
						addButton.className = "btn btn-success";
						addButton.innerHTML = "Ajouter";
						addButton.href = "formCharacter.html?id=0";
						
						addButtonRow.appendChild(addButton);
						characters.appendChild(addButtonRow);
						
						addJsonKeysToDiv(characters, character);
						first = false;
					}
					addJsonValuesToDiv(characters, character);				
				}
			}
			else
			{
				console.log("fail " + request.status);
			}
		};
		request.send();
	</script>
</body>
</html>