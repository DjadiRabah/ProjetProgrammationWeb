<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="general.css">

<title>Choix personnage</title>
</head>
<body>

<div class="container text-center" id="">
	
  <div class="row row-eq-height">
    <div class="col-sm-4">
	<a class="btn" onclick=changeCharacter(true)>  
      <img src="image/fleche_gauche.jpg" alt="fleche_gauche" class="img-responsive" id="">
	</a>
    </div>
    <div class="col-sm-4">
      <img src="" alt="versus" class="img-responsive" id="perso" >
    	
    </div>
    <div class="col-sm-4">
	<a class="btn" onclick=changeCharacter(false)>  
     <img src="image/fleche_droite.jpeg" alt="fleche_droite" class="img-responsive" id="" >
	</a>    
	</div>
  </div>
</div>
</div>
<script>
let currentCharacter = 1;
let maxCharacter = 0;

displayCharacter();

function displayCharacter(){		
		var request = new XMLHttpRequest();
		request.open('GET', 'characters');
		
		request.onload = function() {
			if(request.status === 200)
			{
				var charactersJson = JSON.parse(request.responseText);	
				console.log(charactersJson[currentCharacter]["fileName"]);
				maxCharacter = charactersJson.length;
				
				var perso = document.getElementById("perso");
				var photoprincipal = perso.getAttribute("src");
				photoprincipal = "image/"+ charactersJson[currentCharacter]["fileName"];
				perso.setAttribute("src", photoprincipal);
			}
			else
			{
				console.log("fail " + request.status);
			}
		};
		 request.send();
}

function changeCharacter(left){
		//console.log(maxCharacter);
		if (left)
		{
			if (currentCharacter <=0)
			{
				currentCharacter = maxCharacter -1;
				
			}
			else
			{
			currentCharacter = currentCharacter -1;
			}	
		}
		
		else
		{
			if (currentCharacter >= maxCharacter-1)
			{
				currentCharacter = 0;
			}
			else
			{
				
			currentCharacter = currentCharacter +1;
			}
		}
		displayCharacter();
		
		//console.log(currentCharacter);	
			
	}
	
</script>
</body>
</html>