<!DOCTYPE html>
<html>
<head>
<meta name="viewport" charset="UTF-8">
<link rel="stylesheet" href="general.css">

<title>Choix personnage</title>
</head>
<body>

	<h1 class= "text-center" id="charactername"> Nom du personnage</h1>

	<ul class="breadcrumb" id="lorecharacter">
	  <li class="active">Lore personage</li>
	</ul>

	<div class="container text-center" id="">

		<div class="row row-eq-height">
			<div class="col-sm-4">
				<a class="btn" onclick=changeCharacter(true)> <img
					src="image/fleche_gauche.jpg" alt="fleche_gauche"
					class="img-responsive" id="">
				</a>
			</div>
			<div class="col-sm-4">
				<img src="" alt="versus" class="img-responsive" id="perso">

			</div>
			<div class="col-sm-4">
				<a class="btn" onclick=changeCharacter(false)> <img
					src="image/fleche_droite.jpeg" alt="fleche_droite"
					class="img-responsive" id="">
				</a>
			</div>
		
	</div>
	<br>
	<div class="row  " id="">
		<div class="panel panel-primary col-sm-3">
		  <div class="panel-heading">
		    <h3 class="panel-title">Point de vie</h3>
		  </div>
		  <div class="panel-body" id="life">
		    pdv
		  </div>
		</div>
		<div class="panel panel-primary col-sm-3">
		  <div class="panel-heading">
		    <h3 class="panel-title">Attaque</h3>
		  </div>
		  <div class="panel-body" id="attack">
		    
		  </div>
		</div>
		<div class="panel panel-primary col-sm-3">
		  <div class="panel-heading">
		    <h3 class="panel-title">Defense</h3>
		  </div>
		  <div class="panel-body" id="defense">
						   
		  </div>
		</div>
		<div class="panel panel-primary col-sm-3">
		  <div class="panel-heading">
		    <h3 class="panel-title">Esquive</h3>
		  </div>
		  <div class="panel-body" id="dodge">
		    
		  </div>
		</div>
	</div>
<div>
<a href="index.html" class="btn btn-danger btn-lg btn-block">Commencer l'aventure</a>
<a href="index.html" class="btn btn-success btn-lg btn-block">Retour Ã  l'accueil</a>
	</div>
	<script>
let currentCharacter = 1;
let maxCharacter = 0;

displayCharacter();

function displayCharacter(){		
		var request = new XMLHttpRequest();
		request.open('GET', 'characters');
		
		request.onload = function() {
			if(request.status === 200)
			{
				var charactersJson = JSON.parse(request.responseText);	
				console.log(charactersJson[currentCharacter]["filename"]);
				
				document.getElementById('lorecharacter').innerHTML= charactersJson[currentCharacter]["lore"];
				document.getElementById('charactername').innerHTML= charactersJson[currentCharacter]["name"];
				
				document.getElementById('life').innerHTML= charactersJson[currentCharacter]["hp"];
				document.getElementById('attack').innerHTML= charactersJson[currentCharacter]["attack"];
				document.getElementById('defense').innerHTML= charactersJson[currentCharacter]["defense"];
				document.getElementById('dodge').innerHTML= charactersJson[currentCharacter]["dodge"];
				maxCharacter = charactersJson.length;
				
				var perso = document.getElementById("perso");
				var photoprincipal = perso.getAttribute("src");
				photoprincipal = "image/"+ charactersJson[currentCharacter]["filename"];
				perso.setAttribute("src", photoprincipal);
			}
			else
			{
				console.log("fail " + request.status);
			}
		};
		 request.send();
}

function changeCharacter(left){
		//console.log(maxCharacter);
		if (left)
		{
			if (currentCharacter <=0)
			{
				currentCharacter = maxCharacter -1;
				
			}
			else
			{
			currentCharacter = currentCharacter -1;
			}	
		}
		
		else
		{
			if (currentCharacter >= maxCharacter-1)
			{
				currentCharacter = 0;
			}
			else
			{
				
			currentCharacter = currentCharacter +1;
			}
		}
		displayCharacter();
		
		//console.log(currentCharacter);	
			
	}
	
</script>
</body>
</html>